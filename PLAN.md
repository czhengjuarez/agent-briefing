# Agent Briefing Tool - Development Plan

## ğŸ“‹ Project Overview

**Project Name**: Agent Briefing Tool  
**Purpose**: AI-powered agent delegation tool with smart objective composition, file context upload, and future agent chaining capabilities  
**Relationship to PromptLibrary**: Separate app with shared design system and future cross-linking

---

## ğŸ¨ Design System Reuse from PromptLibrary

### **Exact Reuse** (Copy as-is)

#### 1. **Color Palette & Tailwind Config**
```javascript
// tailwind.config.js
colors: {
  primary: '#8E1F5A',      // Key actions and highlights
  secondary: '#DD388B',     // Enhanced dark mode visibility
  'dark-bg': '#0D1533',     // Custom deep blue theme
}
```

#### 2. **Theme Context & Dark Mode**
- **File**: `src/contexts/ThemeContext.jsx`
- **Features**: 
  - localStorage persistence
  - System preference detection
  - Toggle functionality
  - Document class management

#### 3. **Base Styles**
- **File**: `src/index.css`
- System font stack
- Tailwind directives
- Base typography

#### 4. **UI Principles**
- Minimalist design
- 4px grid system (Tailwind spacing)
- WCAG AA compliant contrast
- Mobile-first responsive design
- Modal-based interactions
- Smart modal behavior (ESC to close, click outside)

### **Adapt & Customize**

#### 5. **Component Patterns**
- **Modal Structure**: Reuse modal wrapper pattern with backdrop
- **Form Validation**: Error state management with visual feedback
- **Button Styles**: Gray secondary buttons, primary color for creation
- **Card Layout**: Clean card design with hover states
- **Loading States**: Spinner and skeleton patterns

#### 6. **Layout Structure**
- Header with app name and dark mode toggle
- Main content area with proper spacing
- Responsive grid/flex layouts
- Consistent padding/margins

---

## ğŸ—ï¸ New App Architecture

### **Directory Structure**
```
AgentBriefing/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ BriefingForm.jsx           # Main form container
â”‚   â”‚   â”‚   â”œâ”€â”€ ObjectiveComposer.jsx      # AI-powered objective field
â”‚   â”‚   â”‚   â”œâ”€â”€ ContextUploader.jsx        # File upload component
â”‚   â”‚   â”‚   â”œâ”€â”€ BriefingCard.jsx           # Display saved briefings
â”‚   â”‚   â”‚   â”œâ”€â”€ BriefingList.jsx           # List all briefings
â”‚   â”‚   â”‚   â”œâ”€â”€ SmartFieldInput.jsx        # Reusable smart input
â”‚   â”‚   â”‚   â””â”€â”€ AgentChainBuilder.jsx      # Future: chain agents
â”‚   â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”‚   â””â”€â”€ ThemeContext.jsx           # [REUSED]
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useStorage.js              # KV storage hook
â”‚   â”‚   â”‚   â”œâ”€â”€ useAI.js                   # Cloudflare AI hook
â”‚   â”‚   â”‚   â””â”€â”€ useFileUpload.js           # File handling hook
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ cloudflareStorage.js       # API client
â”‚   â”‚   â”‚   â”œâ”€â”€ aiService.js               # AI API wrapper
â”‚   â”‚   â”‚   â””â”€â”€ fileService.js             # File processing
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ fileParser.js              # PDF/DOC parsing
â”‚   â”‚   â”‚   â””â”€â”€ validators.js              # Form validation
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ main.jsx
â”‚   â”‚   â””â”€â”€ index.css                      # [REUSED with additions]
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tailwind.config.js                 # [REUSED]
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ worker/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.js                       # Main worker
â”‚   â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”‚   â”œâ”€â”€ briefings.js               # CRUD for briefings
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.js                      # AI endpoint handler
â”‚   â”‚   â”‚   â””â”€â”€ files.js                   # File upload handler
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ aiHelpers.js               # AI prompt templates
â”‚   â”‚       â””â”€â”€ fileProcessors.js          # File parsing logic
â”‚   â”œâ”€â”€ wrangler.toml
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ frontend-worker/                       # Deployment worker
â”‚   â””â”€â”€ (generated by build script)
â”‚
â”œâ”€â”€ build-worker.js                        # [REUSED]
â””â”€â”€ README.md
```

---

## ğŸ¯ Core Features - Phase 1 (MVP)

### **1. Agent Briefing Template Form**

#### **Fields** (from your image):
- **OBJECTIVE** * (required)
  - What you're trying to achieve and why
  - Enhanced with AI Goal Refiner
  
- **CONTEXT** * (required)
  - Environment, constraints, organizational history
  - File upload support (PDF, DOC, TXT)
  
- **BOUNDARIES** * (required)
  - What the agent can cannot do
  
- **ESCALATION** * (required)
  - When to stop and ask for guidance
  
- **STAKEHOLDERS** (optional)
  - Who needs to know or approve
  
- **SUCCESS CRITERIA** * (required)
  - How you'll know it worked

#### **Form Features**:
- âœ… Real-time validation with error states
- âœ… Auto-save drafts to localStorage
- âœ… Unsaved changes warning
- âœ… Character count for each field
- âœ… Markdown support for formatting
- âœ… Template presets (e.g., "Blog Writing", "Code Review")

### **2. Smart Objective Composer (AI-Powered)**

#### **User Flow**:
1. User types initial objective: "Write a blog"
2. AI detects vague input and prompts:
   - "Who is the audience?"
   - "What is the tone?"
   - "What is the call to action?"
   - "What is the desired length?"
3. User answers prompts (inline or modal)
4. AI generates refined objective:
   ```
   Write a 1500-word blog post for software developers about 
   Cloudflare Workers, using a technical but approachable tone, 
   with a call-to-action to try the free tier.
   ```
5. User can accept, edit, or regenerate

#### **Technical Implementation**:
- **Model**: `@cf/meta/llama-3.1-8b-instruct` or `@cf/mistral/mistral-7b-instruct-v0.1`
- **Prompt Template**:
  ```
  You are an AI assistant helping users clarify their objectives.
  
  User's initial objective: "{user_input}"
  
  Analyze this objective and:
  1. Identify missing critical details
  2. Ask 3-5 clarifying questions
  3. Format as JSON: {"questions": ["Q1", "Q2", ...]}
  ```
- **Refinement Prompt**:
  ```
  Original objective: "{original}"
  User answers:
  - Q1: {answer1}
  - Q2: {answer2}
  
  Generate a clear, specific, actionable objective statement.
  ```

### **3. Context File Upload**

#### **Supported Formats**:
- âœ… PDF (.pdf)
- âœ… Word Documents (.doc, .docx)
- âœ… Text files (.txt, .md)
- âœ… CSV/Excel (.csv, .xlsx) - for data context
- âš ï¸ Max file size: 10MB per file
- âš ï¸ Max 5 files per briefing

#### **Processing Pipeline**:
1. **Frontend**: File validation (type, size)
2. **Upload**: Send to Worker endpoint
3. **Worker**: 
   - Store file in R2 bucket (Cloudflare Object Storage)
   - Extract text content using libraries:
     - PDF: `pdf-parse` or `pdfjs-dist`
     - DOCX: `mammoth` or `docx-preview`
     - TXT/MD: Direct read
4. **AI Processing**: Summarize file content
5. **Storage**: Save file reference + summary in KV
6. **Display**: Show file name, size, summary in Context field

#### **UI Components**:
- Drag-and-drop upload zone
- File list with preview/remove
- Upload progress indicators
- File summary cards with AI-generated insights

### **4. Briefing Management**

#### **CRUD Operations**:
- **Create**: Save new briefing
- **Read**: View all briefings (list + detail view)
- **Update**: Edit existing briefing
- **Delete**: Remove briefing (with confirmation)
- **Duplicate**: Clone briefing for variations

#### **Storage Schema** (Cloudflare KV):
```javascript
// Key: briefing:{id}
{
  id: "briefing-1234567890",
  title: "Blog Post - Cloudflare Workers",
  objective: "Write a 1500-word...",
  context: "Target audience: developers...",
  contextFiles: [
    {
      id: "file-123",
      name: "style-guide.pdf",
      size: 245678,
      url: "https://r2.../file-123",
      summary: "Company style guide emphasizing..."
    }
  ],
  boundaries: "Do not make claims about...",
  escalation: "Stop if technical accuracy...",
  stakeholders: "Marketing team, CTO",
  successCriteria: "1500+ words, SEO score >80",
  createdAt: "2025-01-15T10:30:00Z",
  updatedAt: "2025-01-15T11:45:00Z",
  tags: ["blog", "technical-writing"]
}
```

### **5. UI/UX Features**

#### **Main View**:
- Header: "Agent Briefing Tool" + dark mode toggle
- Subtitle: "Define your delegation clearly"
- Primary action: "Create New Briefing" button (primary color)
- Briefing list: Cards with title, objective preview, date

#### **Form View**:
- Full-screen modal or dedicated page
- Progress indicator (fields completed)
- AI assistance badge on Objective field
- File upload zone in Context section
- Save draft / Submit buttons
- Cancel with unsaved changes warning

#### **Briefing Card**:
- Title (editable inline)
- Objective preview (truncated)
- File count badge
- Action buttons: View, Edit, Duplicate, Delete
- Timestamp: "Created 2 days ago"

---

## ğŸš€ Technical Stack

### **Frontend**
- **React 19** with Hooks
- **Vite** for dev/build
- **Tailwind CSS 3.4.17** (same config as PromptLibrary)
- **Heroicons** or **Lucide React** for icons
- **React Dropzone** for file uploads
- **React Markdown** for preview (optional)

### **Backend (Cloudflare Workers)**
- **Cloudflare Workers** for API
- **Cloudflare KV** for briefing data
- **Cloudflare R2** for file storage
- **Cloudflare AI** (`@cloudflare/ai`) for smart features
- **Workers AI Models**:
  - Text generation: `@cf/meta/llama-3.1-8b-instruct`
  - Embeddings (future): `@cf/baai/bge-base-en-v1.5`

### **File Processing Libraries**
- `pdf-parse` or `pdfjs-dist` for PDFs
- `mammoth` for DOCX
- `papaparse` for CSV

### **Deployment**
- **Wrangler CLI** for deployment
- **Custom build script** (reuse from PromptLibrary)
- **Environment variables** for API keys

---

## ğŸ“Š API Endpoints

### **Briefings**
```
GET    /api/briefings           # List all briefings
GET    /api/briefings/:id       # Get single briefing
POST   /api/briefings           # Create briefing
PUT    /api/briefings/:id       # Update briefing
DELETE /api/briefings/:id       # Delete briefing
```

### **AI Features**
```
POST   /api/ai/refine-objective # Smart objective composer
  Body: { objective: string, answers?: object }
  Response: { refined: string, questions?: string[] }

POST   /api/ai/summarize-file   # Summarize uploaded file
  Body: { fileContent: string, fileName: string }
  Response: { summary: string }
```

### **File Management**
```
POST   /api/files/upload        # Upload file
  Body: FormData with file
  Response: { fileId, url, name, size }

GET    /api/files/:id           # Get file metadata
DELETE /api/files/:id           # Delete file
```

---

## ğŸ”— Future Integration with PromptLibrary

### **Phase 2 Features**

#### **1. Cross-App Navigation**
- Add header link in PromptLibrary: "Agent Briefing Tool â†’"
- Add header link in Agent Briefing: "â† Prompt Library"
- Consistent header design across both apps

#### **2. Prompt Import**
- Button in Agent Briefing: "Import from Prompt Library"
- Opens modal with PromptLibrary prompts
- Select prompt â†’ auto-fill Objective field
- Example: Select "Blog Creation" prompt â†’ fills objective with prompt template

#### **3. Briefing Export to Prompts**
- Button in Agent Briefing: "Save as Prompt Template"
- Converts briefing fields into PromptLibrary format:
  - Title: Briefing title
  - Purpose: Objective
  - Prompt: Full briefing formatted as prompt
  - Context: Boundaries + Escalation
- Opens PromptLibrary with pre-filled form

#### **4. Shared Component Library**
- Extract common components to `@czhengjuarez/shared-ui` package:
  - ThemeContext
  - Modal wrapper
  - Button components
  - Form inputs with validation
  - Loading states
- Publish to npm or use workspace monorepo

#### **5. Unified Design System**
- Create `design-system.md` documenting:
  - Color palette
  - Typography scale
  - Spacing system
  - Component patterns
  - Accessibility guidelines

---

## ğŸ¯ Phase 3: Agent Chaining (Future)

### **Concept**
Chain multiple agent briefings into a workflow:
1. **Agent 1**: Research topic â†’ outputs summary
2. **Agent 2**: Write draft â†’ uses Agent 1 output as context
3. **Agent 3**: Edit & polish â†’ uses Agent 2 output

### **UI Features**
- Visual workflow builder (drag-and-drop)
- Connect briefings with arrows
- Define input/output mappings
- Execute chain with progress tracking

### **Technical**
- Store chains in KV: `chain:{id}`
- Execute sequentially via Worker
- Stream results to frontend
- Support parallel execution (future)

---

## ğŸ“… Development Timeline

### **Week 1: Foundation**
- âœ… Set up project structure
- âœ… Copy reusable components from PromptLibrary
- âœ… Configure Tailwind with same theme
- âœ… Set up Cloudflare Workers + KV
- âœ… Create basic BriefingForm component

### **Week 2: Core Features**
- âœ… Implement all 6 form fields with validation
- âœ… Build CRUD operations for briefings
- âœ… Create BriefingList and BriefingCard components
- âœ… Add dark mode support
- âœ… Implement auto-save drafts

### **Week 3: AI Features**
- âœ… Integrate Cloudflare AI SDK
- âœ… Build Smart Objective Composer
- âœ… Create AI prompt templates
- âœ… Add refinement flow UI
- âœ… Test AI responses and tune prompts

### **Week 4: File Upload**
- âœ… Set up Cloudflare R2 bucket
- âœ… Build file upload component
- âœ… Implement file processing (PDF, DOCX)
- âœ… Add AI file summarization
- âœ… Create file preview/management UI

### **Week 5: Polish & Deploy**
- âœ… Add loading states and error handling
- âœ… Implement responsive design
- âœ… Write comprehensive README
- âœ… Deploy to Cloudflare Workers
- âœ… Test end-to-end workflows

### **Week 6+: Future Enhancements**
- ğŸ”„ Cross-app integration with PromptLibrary
- ğŸ”„ Template presets
- ğŸ”„ Export to PDF/Word
- ğŸ”„ Agent chaining (Phase 3)

---

## ğŸ’° Cost Estimation (Cloudflare)

### **Free Tier Limits**
- **Workers**: 100,000 requests/day
- **KV**: 100,000 reads/day, 1,000 writes/day, 1GB storage
- **R2**: 10GB storage, 1M Class A operations/month
- **AI**: 10,000 neurons/day (approx. 100-500 AI calls)

### **Paid Tier** (if needed)
- **Workers**: $5/month + $0.50/million requests
- **KV**: $0.50/GB storage + $0.50/million reads
- **R2**: $0.015/GB storage + operations fees
- **AI**: $0.011 per 1,000 neurons

**Expected Cost for MVP**: $0-10/month (within free tier for development)

---

## ğŸ”’ Security Considerations

### **File Upload**
- âœ… Validate file types (whitelist)
- âœ… Scan for malware (future: Cloudflare Gateway)
- âœ… Limit file size (10MB)
- âœ… Sanitize file names
- âœ… Use signed URLs for R2 access

### **AI Input**
- âœ… Sanitize user input before sending to AI
- âœ… Rate limit AI requests (prevent abuse)
- âœ… Log AI interactions for monitoring

### **Data Privacy**
- âœ… No PII in AI prompts (warn users)
- âœ… Encrypt sensitive data in KV
- âœ… Add data retention policy

---

## ğŸ“š Documentation Plan

### **README.md** (Main)
- Project overview
- Features list
- Installation instructions
- Deployment guide
- Architecture diagram

### **DEVELOPMENT.md**
- Local setup
- Environment variables
- Testing guide
- Contribution guidelines

### **API.md**
- Endpoint documentation
- Request/response examples
- Error codes
- Rate limits

### **AI_INTEGRATION.md**
- AI model selection
- Prompt engineering guide
- Fine-tuning instructions (future)
- Cost optimization tips

---

## âœ… Success Metrics

### **MVP Success Criteria**
- âœ… User can create briefing in <2 minutes
- âœ… AI refines objective with 3+ clarifying questions
- âœ… File upload works for PDF/DOCX (95% success rate)
- âœ… App loads in <1 second (global edge)
- âœ… Mobile responsive (works on phones)
- âœ… Dark mode matches PromptLibrary aesthetic

### **User Feedback Goals**
- ğŸ“Š Collect feedback from 10+ users
- ğŸ“Š Iterate on AI prompt quality
- ğŸ“Š Identify most-used features
- ğŸ“Š Plan Phase 2 based on feedback

---

## ğŸ¨ Design Mockup Notes

### **Color Usage**
- **Primary (#8E1F5A)**: "Create New Briefing", "Brief Agent" button
- **Secondary (#DD388B)**: AI assistance badges, file upload zone
- **Gray**: All other buttons (Edit, Delete, Cancel)
- **Dark Background (#0D1533)**: Dark mode background

### **Typography**
- **Headings**: Bold, larger size
- **Field Labels**: Uppercase, small, gray
- **Field Descriptions**: Italic, smaller, lighter gray
- **Body Text**: System font, comfortable line height

### **Spacing**
- **Card Padding**: 6 (24px)
- **Section Gaps**: 8 (32px)
- **Button Spacing**: 4 (16px)
- **Form Fields**: 4 (16px) between fields

---

## ğŸš¦ Decision Points for Review

### **1. File Storage: R2 vs KV?**
- **Recommendation**: R2 for files >1MB, KV for metadata
- **Reason**: KV has 25MB value limit, R2 is optimized for objects

### **2. AI Model Selection?**
- **Option A**: Llama 3.1 8B (better quality, slower)
- **Option B**: Mistral 7B (faster, good enough)
- **Recommendation**: Start with Mistral, upgrade if needed

### **3. File Processing: Client vs Server?**
- **Recommendation**: Server-side (Worker)
- **Reason**: Security, consistent processing, no client library bloat

### **4. Monorepo vs Separate Repos?**
- **Recommendation**: Separate repos initially, monorepo later
- **Reason**: Easier to start, migrate when shared components mature

### **5. Authentication?**
- **MVP**: No auth (public tool)
- **Future**: Cloudflare Access or Auth0 for team features

---

## ğŸ“ Next Steps After Approval

1. **Create GitHub repo**: `agent-briefing-tool`
2. **Initialize project**: Copy PromptLibrary structure
3. **Set up Cloudflare resources**: KV namespace, R2 bucket
4. **Start with BriefingForm**: Build form with validation
5. **Integrate AI**: Smart Objective Composer
6. **Add file upload**: Context file support
7. **Deploy MVP**: Test with real users

---

## ğŸ¤” Open Questions

1. **Should briefings be shareable via URL** (like PromptLibrary prompts)?
2. **Do we need versioning** for briefings (track changes over time)?
3. **Should we support team collaboration** (multiple users per briefing)?
4. **Export format**: PDF, Word, or both?
5. **Template marketplace**: Share briefing templates publicly?

---

**Ready to proceed?** Review this plan and let me know:
- âœ… Approve as-is
- ğŸ”„ Request changes
- ğŸ’¬ Discuss specific sections

Once approved, I'll start scaffolding the project! ğŸš€
